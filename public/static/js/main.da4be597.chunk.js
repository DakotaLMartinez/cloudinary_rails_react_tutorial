(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),s=n(12),i=n.n(s),j=(n(19),n(5)),o=(n(20),n(2)),a=n(1);var u=function(e){var t=e.currentUser,n=e.setCurrentUser,r=Object(o.g)(),s=Object(c.useState)([]),i=Object(j.a)(s,2),u=i[0],b=i[1];return Object(c.useEffect)((function(){fetch("/api/posts").then((function(e){return e.json()})).then((function(e){return b(e)}))}),[]),Object(a.jsxs)("div",{children:[Object(a.jsxs)("p",{children:["Logged in as ",t.username," ",Object(a.jsx)("button",{onClick:function(){fetch("/api/logout",{method:"DELETE",credentials:"include"}).then((function(e){e.ok&&(n(null),r.push("/"))}))},children:"Logout"})]}),u.map((function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:e.title}),Object(a.jsx)("p",{children:e.content})]},e.id)}))]})},b=n(6);var l=function(e){var t=e.setCurrentUser,n=Object(o.g)(),r=Object(c.useState)(""),s=Object(j.a)(r,2),i=s[0],u=s[1],l=Object(c.useState)(""),h=Object(j.a)(l,2),O=h[0],d=h[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)(o.a,{to:"/"}),Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i,password:O})}).then((function(e){e.ok?e.json().then((function(e){t(e),n.push("/wherever")})):e.json().then((function(e){console.error(e)}))}))},children:[Object(a.jsx)("h1",{children:"Log In"}),Object(a.jsxs)("p",{children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)("input",{type:"text",name:"username",value:i,onChange:function(e){return u(e.target.value)}})]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)("input",{type:"password",name:"",value:O,onChange:function(e){return d(e.target.value)}})]}),Object(a.jsx)("p",{children:Object(a.jsx)("button",{type:"submit",children:"Log In"})}),Object(a.jsx)("p",{children:"-- or --"}),Object(a.jsx)("p",{children:Object(a.jsx)(b.b,{to:"/signup",children:"Sign Up"})})]})]})};var h=function(e){var t=e.setCurrentUser,n=(Object(o.g)(),Object(c.useState)("")),r=Object(j.a)(n,2),s=r[0],i=r[1],u=Object(c.useState)(""),l=Object(j.a)(u,2),h=l[0],O=l[1],d=Object(c.useState)(""),p=Object(j.a)(d,2),x=p[0],f=p[1];return Object(a.jsx)("div",{children:Object(a.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:h,password_confirmation:x})}).then((function(e){e.ok?e.json().then((function(e){t(e)})):e.json().then((function(e){console.error(e)}))}))},children:[Object(a.jsx)("h1",{children:"Sign Up"}),Object(a.jsxs)("p",{children:[Object(a.jsx)("label",{htmlFor:"username",children:"Username"}),Object(a.jsx)("input",{type:"text",name:"username",value:s,onChange:function(e){return i(e.target.value)}})]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)("input",{type:"password",name:"",value:h,onChange:function(e){return O(e.target.value)}})]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("label",{htmlFor:"password_confirmation",children:"Password Confirmation"}),Object(a.jsx)("input",{type:"password",name:"password_confirmation",value:x,onChange:function(e){return f(e.target.value)}})]}),Object(a.jsx)("p",{children:Object(a.jsx)("button",{type:"submit",children:"Sign Up"})}),Object(a.jsx)("p",{children:"-- or --"}),Object(a.jsx)("p",{children:Object(a.jsx)(b.b,{to:"/login",children:"Log In"})})]})})};var O=function(e){var t=e.setCurrentUser;return Object(a.jsxs)(o.d,{children:[Object(a.jsx)(o.b,{exact:!0,path:"/",children:Object(a.jsx)(l,{setCurrentUser:t})}),Object(a.jsx)(o.b,{exact:!0,path:"/signup",children:Object(a.jsx)(h,{setCurrentUser:t})}),Object(a.jsx)(o.a,{to:"/"})]})};var d=function(){var e=Object(c.useState)(null),t=Object(j.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(!1),i=Object(j.a)(s,2),o=i[0],l=i[1];return Object(c.useEffect)((function(){fetch("/api/me",{credentials:"include"}).then((function(e){e.ok?e.json().then((function(e){r(e),l(!0)})):l(!0)}))}),[]),o?Object(a.jsx)(b.a,{children:n?Object(a.jsx)(u,{setCurrentUser:r,currentUser:n}):Object(a.jsx)(O,{setCurrentUser:r})}):Object(a.jsx)("div",{})},p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,31)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),s(e),i(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(d,{})}),document.getElementById("root")),p()}},[[30,1,2]]]);
//# sourceMappingURL=main.da4be597.chunk.js.map